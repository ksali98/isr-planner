âœ… OrienteeringSolverInterface loaded (Docker path)
âœ… SAM navigation (boundary_navigation) loaded successfully
ğŸ“¦ Initializing OrienteeringSolverInterface...
âœ… REAL Orienteering solver loaded (Held-Karp DP)
ğŸ“¦ Solver interface initialized
Loading environment from /Users/kamalali/Downloads/isr_env2512122217_1.json

Environment Summary:
  Airports: 5
  Targets: 19
  SAMs: 3
  Drones: 5

Running initial solver with target allocation...

============================================================
ğŸ¯ TARGET ALLOCATION RESULTS (strategy: efficient)
============================================================
  Drone 1: ['T17', 'T9']
  Drone 2: ['T5', 'T6', 'T8', 'T10', 'T11', 'T12', 'T13']
  Drone 3: ['T14']
  Drone 4: ['T18', 'T19', 'T4', 'T2', 'T15', 'T16']
  Drone 5: ['T1', 'T7', 'T3']
  Total targets allocated: 19/19
============================================================

ğŸ” [Run Planner] D1 config: {'enabled': True, 'fuel_budget': 150, 'start_airport': 'A1', 'end_airport': '-', 'target_access': {'a': True, 'b': True, 'c': True, 'd': True, 'e': True}}
ğŸ” [Run Planner] D1 start_id=A1, raw_end_id=-, flexible=True, end_id=A1
ğŸš Drone 1: Solving with 2 targets: ['T9', 'T17']
   ğŸ“Š Filtered matrix: 7 nodes (5 airports + 2 targets)
   ğŸ”„ Flexible endpoint: solver will choose optimal end airport
ğŸ” SOLVER MODE DETERMINATION:
  - start_id: A1
  - json_end from env: A1
  - end_id parameter: A1
  - mode parameter: best_end
ğŸ”§ Using EXPLICIT fuel_cap parameter: 150.0
ğŸ”§ ORIENTEERING SOLVER DEBUG:
  - Final fuel limit: 150.0
  - Environment has 7 locations
  - Mode: best_end
  - End airport: TO BE DETERMINED
ğŸ”§ Available airports: ['A1', 'A2', 'A3', 'A4', 'A5']
ğŸ”§ Start airport index: 0 (A1)
ğŸ”§ Available targets: ['T9', 'T17']
    âœ… NEW BEST: 5 points, 43.2 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 22.4 distance (within 150.0 budget)
    âœ… NEW BEST: 15 points, 48.9 distance (within 150.0 budget)
ğŸ”§ FINAL SOLUTION CHECK:
  - Distance: 48.87262240031138
  - Fuel cap: 150.0
  - CONSTRAINT VIOLATION: False
   ğŸ¯ Solver chose endpoint: A1
ğŸ” [DEBUG] Drone 1 solver returned:
   route_ids = ['A1', 'T17', 'T9', 'A1']
   total_points = 15, distance = 48.87
ğŸ¯ ISRTrajectoryPlanner initialized with 3 SAMs (boundary navigation + strict validation)
   SAM: pos=(52.23375822368421, 47.45682565789473), range=12.00
   SAM: pos=(18.944284539473685, 57.983141447368425), range=10.00
   SAM: pos=(31.705386513157897, 52.78577302631579), range=10.00

ğŸ“ [D1] Generating trajectory for route: A1 â†’ T17 â†’ T9 â†’ A1
   A1: (18.2, 39.6)
   T17: (7.1, 38.2)
   T9: (1.4, 53.2)
   A1: (18.2, 39.6)
   ğŸ“ [D1] Planning segment A1â†’T17: (18.2,39.6) â†’ (7.1,38.2)
Planning path: (18.23499177631579, 39.56208881578947) -> (7.1001233552631575, 38.180509868421055)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.22
   âœ… [D1] Segment A1â†’T17 has 2 waypoints, length â‰ˆ 11.2
      [0] (18.23, 39.56)
      [1] (7.10, 38.18)
   ğŸ“ [D1] Planning segment T17â†’T9: (7.1,38.2) â†’ (1.4,53.2)
Planning path: (7.1001233552631575, 38.180509868421055) -> (1.4422286184210527, 53.180509868421055)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=16.03
   âœ… [D1] Segment T17â†’T9 has 2 waypoints, length â‰ˆ 16.0
      [0] (7.10, 38.18)
      [1] (1.44, 53.18)
   ğŸ“ [D1] Planning segment T9â†’A1: (1.4,53.2) â†’ (18.2,39.6)
Planning path: (1.4422286184210527, 53.180509868421055) -> (18.23499177631579, 39.56208881578947)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=21.62
   âœ… [D1] Segment T9â†’A1 has 2 waypoints, length â‰ˆ 21.6
      [0] (1.44, 53.18)
      [1] (18.23, 39.56)
ğŸ” [Run Planner] D2 config: {'enabled': True, 'fuel_budget': 150, 'start_airport': 'A2', 'end_airport': '-', 'target_access': {'a': True, 'b': True, 'c': True, 'd': True, 'e': True}}
ğŸ” [Run Planner] D2 start_id=A2, raw_end_id=-, flexible=True, end_id=A2
ğŸš Drone 2: Solving with 7 targets: ['T5', 'T6', 'T8', 'T10', 'T11', 'T12', 'T13']
   ğŸ“Š Filtered matrix: 12 nodes (5 airports + 7 targets)
   ğŸ”„ Flexible endpoint: solver will choose optimal end airport
ğŸ” SOLVER MODE DETERMINATION:
  - start_id: A2
  - json_end from env: A2
  - end_id parameter: A2
  - mode parameter: best_end
ğŸ”§ Using EXPLICIT fuel_cap parameter: 150.0
ğŸ”§ ORIENTEERING SOLVER DEBUG:
  - Final fuel limit: 150.0
  - Environment has 12 locations
  - Mode: best_end
  - End airport: TO BE DETERMINED
ğŸ”§ Available airports: ['A1', 'A2', 'A3', 'A4', 'A5']
ğŸ”§ Start airport index: 1 (A2)
ğŸ”§ Available targets: ['T5', 'T6', 'T8', 'T10', 'T11', 'T12', 'T13']
    âœ… NEW BEST: 5 points, 17.6 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 58.8 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 51.9 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 37.2 distance (within 150.0 budget)
    âœ… NEW BEST: 15 points, 74.3 distance (within 150.0 budget)
    âœ… NEW BEST: 15 points, 70.9 distance (within 150.0 budget)
    âœ… NEW BEST: 15 points, 52.1 distance (within 150.0 budget)
    âœ… NEW BEST: 15 points, 47.0 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 93.9 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 93.2 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 77.3 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 66.9 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 60.2 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 59.3 distance (within 150.0 budget)
    âœ… NEW BEST: 25 points, 101.8 distance (within 150.0 budget)
    âœ… NEW BEST: 25 points, 101.4 distance (within 150.0 budget)
    âœ… NEW BEST: 25 points, 96.7 distance (within 150.0 budget)
    âœ… NEW BEST: 25 points, 94.5 distance (within 150.0 budget)
    âœ… NEW BEST: 25 points, 92.5 distance (within 150.0 budget)
    âœ… NEW BEST: 25 points, 72.6 distance (within 150.0 budget)
    âœ… NEW BEST: 30 points, 119.1 distance (within 150.0 budget)
    âœ… NEW BEST: 30 points, 116.9 distance (within 150.0 budget)
    âœ… NEW BEST: 30 points, 114.9 distance (within 150.0 budget)
    âœ… NEW BEST: 30 points, 113.7 distance (within 150.0 budget)
    âœ… NEW BEST: 30 points, 102.4 distance (within 150.0 budget)
    âœ… NEW BEST: 35 points, 124.8 distance (within 150.0 budget)
ğŸ”§ FINAL SOLUTION CHECK:
  - Distance: 124.80249141452374
  - Fuel cap: 150.0
  - CONSTRAINT VIOLATION: False
   ğŸ¯ Solver chose endpoint: A1
ğŸ” [DEBUG] Drone 2 solver returned:
   route_ids = ['A2', 'T5', 'T6', 'T8', 'T11', 'T10', 'T12', 'T13', 'A1']
   total_points = 35, distance = 124.80
ğŸ¯ ISRTrajectoryPlanner initialized with 3 SAMs (boundary navigation + strict validation)
   SAM: pos=(52.23375822368421, 47.45682565789473), range=12.00
   SAM: pos=(18.944284539473685, 57.983141447368425), range=10.00
   SAM: pos=(31.705386513157897, 52.78577302631579), range=10.00

ğŸ“ [D2] Generating trajectory for route: A2 â†’ T5 â†’ T6 â†’ T8 â†’ T11 â†’ T10 â†’ T12 â†’ T13 â†’ A1
   A2: (57.1, 26.7)
   T5: (62.5, 33.6)
   T6: (81.8, 19.2)
   T8: (61.2, 8.8)
   T11: (42.2, 21.3)
   T10: (46.2, 31.7)
   T12: (28.7, 34.6)
   T13: (21.6, 30.9)
   A1: (18.2, 39.6)
   ğŸ“ [D2] Planning segment A2â†’T5: (57.1,26.7) â†’ (62.5,33.6)
Planning path: (57.05078125000001, 26.667351973684212) -> (62.49486019736842, 33.575246710526315)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=8.80
   âœ… [D2] Segment A2â†’T5 has 2 waypoints, length â‰ˆ 8.8
      [0] (57.05, 26.67)
      [1] (62.49, 33.58)
   ğŸ“ [D2] Planning segment T5â†’T6: (62.5,33.6) â†’ (81.8,19.2)
Planning path: (62.49486019736842, 33.575246710526315) -> (81.83696546052632, 19.23314144736842)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=24.08
   âœ… [D2] Segment T5â†’T6 has 2 waypoints, length â‰ˆ 24.1
      [0] (62.49, 33.58)
      [1] (81.84, 19.23)
   ğŸ“ [D2] Planning segment T6â†’T8: (81.8,19.2) â†’ (61.2,8.8)
Planning path: (81.83696546052632, 19.23314144736842) -> (61.17907072368421, 8.838404605263158)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=23.13
   âœ… [D2] Segment T6â†’T8 has 2 waypoints, length â‰ˆ 23.1
      [0] (81.84, 19.23)
      [1] (61.18, 8.84)
   ğŸ“ [D2] Planning segment T8â†’T11: (61.2,8.8) â†’ (42.2,21.3)
Planning path: (61.17907072368421, 8.838404605263158) -> (42.23170230263158, 21.338404605263158)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=22.70
   âœ… [D2] Segment T8â†’T11 has 2 waypoints, length â‰ˆ 22.7
      [0] (61.18, 8.84)
      [1] (42.23, 21.34)
   ğŸ“ [D2] Planning segment T11â†’T10: (42.2,21.3) â†’ (46.2,31.7)
Planning path: (42.23170230263158, 21.338404605263158) -> (46.17907072368421, 31.733141447368425)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.12
   âœ… [D2] Segment T11â†’T10 has 2 waypoints, length â‰ˆ 11.1
      [0] (42.23, 21.34)
      [1] (46.18, 31.73)
   ğŸ“ [D2] Planning segment T10â†’T12: (46.2,31.7) â†’ (28.7,34.6)
Planning path: (46.17907072368421, 31.733141447368425) -> (28.67907072368421, 34.627878289473685)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=17.74
   âœ… [D2] Segment T10â†’T12 has 2 waypoints, length â‰ˆ 17.7
      [0] (46.18, 31.73)
      [1] (28.68, 34.63)
   ğŸ“ [D2] Planning segment T12â†’T13: (28.7,34.6) â†’ (21.6,30.9)
Planning path: (28.67907072368421, 34.627878289473685) -> (21.573807565789473, 30.943667763157894)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=8.00
   âœ… [D2] Segment T12â†’T13 has 2 waypoints, length â‰ˆ 8.0
      [0] (28.68, 34.63)
      [1] (21.57, 30.94)
   ğŸ“ [D2] Planning segment T13â†’A1: (21.6,30.9) â†’ (18.2,39.6)
Planning path: (21.573807565789473, 30.943667763157894) -> (18.23499177631579, 39.56208881578947)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=9.24
   âœ… [D2] Segment T13â†’A1 has 2 waypoints, length â‰ˆ 9.2
      [0] (21.57, 30.94)
      [1] (18.23, 39.56)
ğŸ” [Run Planner] D3 config: {'enabled': True, 'fuel_budget': 150, 'start_airport': 'A3', 'end_airport': '-', 'target_access': {'a': True, 'b': True, 'c': True, 'd': True, 'e': True}}
ğŸ” [Run Planner] D3 start_id=A3, raw_end_id=-, flexible=True, end_id=A3
ğŸš Drone 3: Solving with 1 targets: ['T14']
   ğŸ“Š Filtered matrix: 6 nodes (5 airports + 1 targets)
   ğŸ”„ Flexible endpoint: solver will choose optimal end airport
ğŸ” SOLVER MODE DETERMINATION:
  - start_id: A3
  - json_end from env: A3
  - end_id parameter: A3
  - mode parameter: best_end
ğŸ”§ Using EXPLICIT fuel_cap parameter: 150.0
ğŸ”§ ORIENTEERING SOLVER DEBUG:
  - Final fuel limit: 150.0
  - Environment has 6 locations
  - Mode: best_end
  - End airport: TO BE DETERMINED
ğŸ”§ Available airports: ['A1', 'A2', 'A3', 'A4', 'A5']
ğŸ”§ Start airport index: 2 (A3)
ğŸ”§ Available targets: ['T14']
    âœ… NEW BEST: 5 points, 22.9 distance (within 150.0 budget)
ğŸ”§ FINAL SOLUTION CHECK:
  - Distance: 22.938389456816175
  - Fuel cap: 150.0
  - CONSTRAINT VIOLATION: False
   ğŸ¯ Solver chose endpoint: A3
ğŸ” [DEBUG] Drone 3 solver returned:
   route_ids = ['A3', 'T14', 'A3']
   total_points = 5, distance = 22.94
ğŸ¯ ISRTrajectoryPlanner initialized with 3 SAMs (boundary navigation + strict validation)
   SAM: pos=(52.23375822368421, 47.45682565789473), range=12.00
   SAM: pos=(18.944284539473685, 57.983141447368425), range=10.00
   SAM: pos=(31.705386513157897, 52.78577302631579), range=10.00

ğŸ“ [D3] Generating trajectory for route: A3 â†’ T14 â†’ A3
   A3: (12.8, 74.2)
   T14: (21.6, 81.6)
   A3: (12.8, 74.2)
   ğŸ“ [D3] Planning segment A3â†’T14: (12.8,74.2) â†’ (21.6,81.6)
Planning path: (12.840254934210527, 74.16735197368422) -> (21.573807565789473, 81.6015625)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.47
   âœ… [D3] Segment A3â†’T14 has 2 waypoints, length â‰ˆ 11.5
      [0] (12.84, 74.17)
      [1] (21.57, 81.60)
   ğŸ“ [D3] Planning segment T14â†’A3: (21.6,81.6) â†’ (12.8,74.2)
Planning path: (21.573807565789473, 81.6015625) -> (12.840254934210527, 74.16735197368422)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.47
   âœ… [D3] Segment T14â†’A3 has 2 waypoints, length â‰ˆ 11.5
      [0] (21.57, 81.60)
      [1] (12.84, 74.17)
ğŸ” [Run Planner] D4 config: {'enabled': True, 'fuel_budget': 150, 'start_airport': 'A4', 'end_airport': 'A5', 'target_access': {'a': True, 'b': True, 'c': True, 'd': True, 'e': True}}
ğŸ” [Run Planner] D4 start_id=A4, raw_end_id=A5, flexible=False, end_id=A5
ğŸš Drone 4: Solving with 6 targets: ['T2', 'T4', 'T15', 'T16', 'T18', 'T19']
   ğŸ“Š Filtered matrix: 11 nodes (5 airports + 6 targets)
   ğŸ¯ Solving with start=A4, end=A5, mode=end
ğŸ” SOLVER MODE DETERMINATION:
  - start_id: A4
  - json_end from env: A5
  - end_id parameter: A5
  - mode parameter: end
ğŸ”§ Using EXPLICIT fuel_cap parameter: 150.0
ğŸ”§ ORIENTEERING SOLVER DEBUG:
  - Final fuel limit: 150.0
  - Environment has 11 locations
  - Mode: end
  - End airport: A5
ğŸ”§ Available airports: ['A1', 'A2', 'A3', 'A4', 'A5']
ğŸ”§ Start airport index: 3 (A4)
ğŸ”§ Available targets: ['T2', 'T4', 'T15', 'T16', 'T18', 'T19']
    âœ… NEW BEST: 7 points, 62.1 distance (within 150.0 budget)
    âœ… NEW BEST: 9 points, 49.3 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 36.9 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 36.3 distance (within 150.0 budget)
    âœ… NEW BEST: 16 points, 71.7 distance (within 150.0 budget)
    âœ… NEW BEST: 17 points, 63.1 distance (within 150.0 budget)
    âœ… NEW BEST: 17 points, 62.3 distance (within 150.0 budget)
    âœ… NEW BEST: 19 points, 63.7 distance (within 150.0 budget)
    âœ… NEW BEST: 19 points, 51.5 distance (within 150.0 budget)
    âœ… NEW BEST: 20 points, 38.7 distance (within 150.0 budget)
    âœ… NEW BEST: 21 points, 79.0 distance (within 150.0 budget)
    âœ… NEW BEST: 26 points, 86.7 distance (within 150.0 budget)
    âœ… NEW BEST: 26 points, 73.9 distance (within 150.0 budget)
    âœ… NEW BEST: 27 points, 64.9 distance (within 150.0 budget)
    âœ… NEW BEST: 29 points, 66.0 distance (within 150.0 budget)
    âœ… NEW BEST: 31 points, 94.1 distance (within 150.0 budget)
    âœ… NEW BEST: 31 points, 81.3 distance (within 150.0 budget)
    âœ… NEW BEST: 36 points, 88.5 distance (within 150.0 budget)
    âœ… NEW BEST: 41 points, 95.8 distance (within 150.0 budget)
    âœ… NEW BEST: 44 points, 126.3 distance (within 150.0 budget)
ğŸ”§ FINAL SOLUTION CHECK:
  - Distance: 126.30732916921252
  - Fuel cap: 150.0
  - CONSTRAINT VIOLATION: False
ğŸ” [DEBUG] Drone 4 solver returned:
   route_ids = ['A4', 'T2', 'T16', 'T15', 'T4', 'T18', 'T19', 'A5']
   total_points = 44, distance = 126.31
ğŸ¯ ISRTrajectoryPlanner initialized with 3 SAMs (boundary navigation + strict validation)
   SAM: pos=(52.23375822368421, 47.45682565789473), range=12.00
   SAM: pos=(18.944284539473685, 57.983141447368425), range=10.00
   SAM: pos=(31.705386513157897, 52.78577302631579), range=10.00

ğŸ“ [D4] Generating trajectory for route: A4 â†’ T2 â†’ T16 â†’ T15 â†’ T4 â†’ T18 â†’ T19 â†’ A5
   A4: (81.0, 67.9)
   T2: (91.7, 60.3)
   T16: (79.2, 29.5)
   T15: (68.8, 49.5)
   T4: (60.0, 60.0)
   T18: (69.3, 78.7)
   T19: (58.4, 77.3)
   A5: (49.2, 84.6)
   ğŸ“ [D4] Planning segment A4â†’T2: (81.0,67.9) â†’ (91.7,60.3)
Planning path: (80.99814967105263, 67.8515625) -> (91.70538651315789, 60.285773026315795)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=13.11
   âœ… [D4] Segment A4â†’T2 has 2 waypoints, length â‰ˆ 13.1
      [0] (81.00, 67.85)
      [1] (91.71, 60.29)
   ğŸ“ [D4] Planning segment T2â†’T16: (91.7,60.3) â†’ (79.2,29.5)
Planning path: (91.70538651315789, 60.285773026315795) -> (79.20538651315789, 29.496299342105264)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=33.23
   âœ… [D4] Segment T2â†’T16 has 2 waypoints, length â‰ˆ 33.2
      [0] (91.71, 60.29)
      [1] (79.21, 29.50)
   ğŸ“ [D4] Planning segment T16â†’T15: (79.2,29.5) â†’ (68.8,49.5)
Planning path: (79.20538651315789, 29.496299342105264) -> (68.81064967105263, 49.49629934210527)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=22.54
   âœ… [D4] Segment T16â†’T15 has 2 waypoints, length â‰ˆ 22.5
      [0] (79.21, 29.50)
      [1] (68.81, 49.50)
   ğŸ“ [D4] Planning segment T15â†’T4: (68.8,49.5) â†’ (60.0,60.0)
Planning path: (68.81064967105263, 49.49629934210527) -> (60.0, 60.0)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=13.71
   âœ… [D4] Segment T15â†’T4 has 2 waypoints, length â‰ˆ 13.7
      [0] (68.81, 49.50)
      [1] (60.00, 60.00)
   ğŸ“ [D4] Planning segment T4â†’T18: (60.0,60.0) â†’ (69.3,78.7)
Planning path: (60.0, 60.0) -> (69.33696546052632, 78.70682565789474)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=20.91
   âœ… [D4] Segment T4â†’T18 has 2 waypoints, length â‰ˆ 20.9
      [0] (60.00, 60.00)
      [1] (69.34, 78.71)
   ğŸ“ [D4] Planning segment T18â†’T19: (69.3,78.7) â†’ (58.4,77.3)
Planning path: (69.33696546052632, 78.70682565789474) -> (58.41591282894737, 77.25945723684211)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.02
   âœ… [D4] Segment T18â†’T19 has 2 waypoints, length â‰ˆ 11.0
      [0] (69.34, 78.71)
      [1] (58.42, 77.26)
   ğŸ“ [D4] Planning segment T19â†’A5: (58.4,77.3) â†’ (49.2,84.6)
Planning path: (58.41591282894737, 77.25945723684211) -> (49.15604440789474, 84.56208881578947)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.79
   âœ… [D4] Segment T19â†’A5 has 2 waypoints, length â‰ˆ 11.8
      [0] (58.42, 77.26)
      [1] (49.16, 84.56)
ğŸ” [Run Planner] D5 config: {'enabled': True, 'fuel_budget': 150, 'start_airport': 'A5', 'end_airport': 'A1', 'target_access': {'a': True, 'b': True, 'c': True, 'd': True, 'e': True}}
ğŸ” [Run Planner] D5 start_id=A5, raw_end_id=A1, flexible=False, end_id=A1
ğŸš Drone 5: Solving with 3 targets: ['T1', 'T3', 'T7']
   ğŸ“Š Filtered matrix: 8 nodes (5 airports + 3 targets)
   ğŸ¯ Solving with start=A5, end=A1, mode=end
ğŸ” SOLVER MODE DETERMINATION:
  - start_id: A5
  - json_end from env: A1
  - end_id parameter: A1
  - mode parameter: end
ğŸ”§ Using EXPLICIT fuel_cap parameter: 150.0
ğŸ”§ ORIENTEERING SOLVER DEBUG:
  - Final fuel limit: 150.0
  - Environment has 8 locations
  - Mode: end
  - End airport: A1
ğŸ”§ Available airports: ['A1', 'A2', 'A3', 'A4', 'A5']
ğŸ”§ Start airport index: 4 (A5)
ğŸ”§ Available targets: ['T1', 'T3', 'T7']
    âœ… NEW BEST: 5 points, 54.6 distance (within 150.0 budget)
    âœ… NEW BEST: 8 points, 55.7 distance (within 150.0 budget)
    âœ… NEW BEST: 10 points, 69.8 distance (within 150.0 budget)
    âœ… NEW BEST: 13 points, 70.8 distance (within 150.0 budget)
ğŸ”§ FINAL SOLUTION CHECK:
  - Distance: 70.8392354790174
  - Fuel cap: 150.0
  - CONSTRAINT VIOLATION: False
ğŸ” [DEBUG] Drone 5 solver returned:
   route_ids = ['A5', 'T7', 'T1', 'T3', 'A1']
   total_points = 13, distance = 70.84
ğŸ¯ ISRTrajectoryPlanner initialized with 3 SAMs (boundary navigation + strict validation)
   SAM: pos=(52.23375822368421, 47.45682565789473), range=12.00
   SAM: pos=(18.944284539473685, 57.983141447368425), range=10.00
   SAM: pos=(31.705386513157897, 52.78577302631579), range=10.00

ğŸ“ [D5] Generating trajectory for route: A5 â†’ T7 â†’ T1 â†’ T3 â†’ A1
   A5: (49.2, 84.6)
   T7: (34.5, 84.5)
   T1: (42.2, 75.5)
   T3: (34.6, 70.9)
   A1: (18.2, 39.6)
   ğŸ“ [D5] Planning segment A5â†’T7: (49.2,84.6) â†’ (34.5,84.5)
Planning path: (49.15604440789474, 84.56208881578947) -> (34.46854440789473, 84.49629934210526)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=14.69
   âœ… [D5] Segment A5â†’T7 has 2 waypoints, length â‰ˆ 14.7
      [0] (49.16, 84.56)
      [1] (34.47, 84.50)
   ğŸ“ [D5] Planning segment T7â†’T1: (34.5,84.5) â†’ (42.2,75.5)
Planning path: (34.46854440789473, 84.49629934210526) -> (42.23170230263158, 75.54893092105263)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=11.85
   âœ… [D5] Segment T7â†’T1 has 2 waypoints, length â‰ˆ 11.8
      [0] (34.47, 84.50)
      [1] (42.23, 75.55)
   ğŸ“ [D5] Planning segment T1â†’T3: (42.2,75.5) â†’ (34.6,70.9)
Planning path: (42.23170230263158, 75.54893092105263) -> (34.60012335526316, 70.94366776315789)
  1 polygon(s) from 3 SAM(s)
  Direct path clear, distance=8.91
   âœ… [D5] Segment T1â†’T3 has 2 waypoints, length â‰ˆ 8.9
      [0] (42.23, 75.55)
      [1] (34.60, 70.94)
   ğŸ“ [D5] Planning segment T3â†’A1: (34.6,70.9) â†’ (18.2,39.6)
Planning path: (34.60012335526316, 70.94366776315789) -> (18.23499177631579, 39.56208881578947)
  1 polygon(s) from 3 SAM(s)
  Direct path blocked by polygon 0
  Start: (34.60012335526316, 70.94366776315789), Goal: (18.23499177631579, 39.56208881578947)
  Start tangents: left=14 at (57.92561972033659, 57.97446448740025), right=17 at (16.055415767567595, 67.506465511941)
    Tangent direction check: to_tangent=(23.325496365073434, -12.969203275757643), to_goal=(-16.365131578947366, -31.381578947368418), dot=25.27
  Trying left tangent (idx=14)
    Found visible exit at idx=6 after 8 steps in CW direction
    Entry direction check: arrival=(23.325496365073434, -12.969203275757643), boundary=(3.1066709894804276, -2.418019089328716), dot=103.82
    Exit direction check: arrival=(-3.883085470762609, -0.6479723605137124), exit=(-33.998766447368425, 4.064277073974779), dot=129.39
    Valid path: CW via left tangent, exit at idx 6, length=92.42, waypoints=11
    Found visible exit at idx=1 after 8 steps in CCW direction
    Entry direction check: arrival=(23.325496365073434, -12.969203275757643), boundary=(-2.7460356509627886, 1.1151643617664533), dot=-78.52
    REJECTED CCW via left: entry would reverse direction
    Tangent direction check: to_tangent=(-18.544707587695562, -3.4372022512168883), to_goal=(-16.365131578947366, -31.381578947368418), dot=411.35
  Trying right tangent (idx=17)
    Found visible exit at idx=6 after 11 steps in CW direction
    Entry direction check: arrival=(-18.544707587695562, -3.4372022512168883), boundary=(3.8643203819867296, 0.38060233744357674), dot=-72.97
    REJECTED CW via right: entry would reverse direction
    Found visible exit at idx=1 after 5 steps in CCW direction
    Entry direction check: arrival=(-18.544707587695562, -3.4372022512168883), boundary=(-3.424516299124658, -1.8304420971271043), dot=69.80
    Exit direction check: arrival=(1.1271806779469902, -3.7158167168428236), exit=(8.067452960911268, -13.729784304655489), dot=60.11
    Valid path: CCW via right tangent, exit at idx 1, length=52.21, waypoints=8
  Best path: CCW via right tangent, exit at idx 1, length=52.21
  All candidates:
    - CCW via right tangent, exit at idx 1: 52.21 (8 waypoints)
    - CW via left tangent, exit at idx 6: 92.42 (11 waypoints)
  Final path: 8 points, distance=52.21, method=CCW via right tangent, exit at idx 1
ğŸ›¡ï¸ Boundary navigation OK: (34.6,70.9) â†’ (18.2,39.6) via 8 waypoints [CCW via right tangent, exit at idx 1]
   âœ… [D5] Segment T3â†’A1 has 8 waypoints, length â‰ˆ 52.2
      [0] (34.60, 70.94)
      [1] (16.06, 67.51)
      [2] (12.63, 65.68)
      [3] (10.17, 62.67)
      [4] (9.04, 57.01)
      [5] (9.04, 57.01)
      [6] (10.17, 53.29)
      [7] (18.23, 39.56)

============================================================
ğŸ¯ ROUTE-DERIVED TARGETS (what solver actually included)
============================================================
  Drone 1: ['T17', 'T9']
  Drone 2: ['T5', 'T6', 'T8', 'T11', 'T10', 'T12', 'T13']
  Drone 3: ['T14']
  Drone 4: ['T2', 'T16', 'T15', 'T4', 'T18', 'T19']
  Drone 5: ['T7', 'T1', 'T3']
  Total targets in routes: 19
============================================================


Initial Solution:
  D1: A1 -> T17 -> T9 -> A1
    Distance: 48.9, Points: 15
  D2: A2 -> T5 -> T6 -> T8 -> T11 -> T10 -> T12 -> T13 -> A1
    Distance: 124.8, Points: 35
  D3: A3 -> T14 -> A3
    Distance: 22.9, Points: 5
  D4: A4 -> T2 -> T16 -> T15 -> T4 -> T18 -> T19 -> A5
    Distance: 126.3, Points: 44
  D5: A5 -> T7 -> T1 -> T3 -> A1
    Distance: 70.8, Points: 13

============================================================
Running Post-Optimization (Swap Closer)...
============================================================

  Solution keys: ['sequences', 'routes', 'wrapped_polygons', 'allocations', 'distance_matrix', 'route_allocations']

  Setting distance matrix with 24 nodes

ğŸ”§ [TrajectorySwapOptimizer] Starting 4 passes...

  ğŸ“ Pass 1/4
    ğŸ¯ T17: SSD=8.09 (route segment A1â†’T9)
    ğŸ¯ T9: SSD=16.03 (route segment T17â†’A1)
    ğŸ¯ T5: SSD=8.18 (route segment A2â†’T6)
    ğŸ¯ T6: SSD=20.08 (route segment T5â†’T8)
         ğŸ“ D4 segment T2â†’T16: OSD=10.60 < SSD=20.08
            ğŸ”„ New best: D4 T2â†’T16, OSD=10.60 (was inf)
         ğŸ“ D4 segment T16â†’T15: OSD=10.60 < SSD=20.08
       âœ… SWAP: T6 from D2 to D4, SSD=20.08â†’OSD=10.60
    ğŸ¯ T8: SSD=20.49 (route segment T5â†’T11)
         ğŸ“ D2 segment A2â†’T5: OSD=18.30 < SSD=20.49
            ğŸ”„ New best: D2 A2â†’T5, OSD=18.30 (was inf)
       âœ… SWAP: T8 from D2 to D2, SSD=20.49â†’OSD=18.30
    ğŸ¯ T11: SSD=11.12 (route segment T5â†’T10)
         ğŸ“ D2 segment T10â†’T12: OSD=10.90 < SSD=11.12
            ğŸ”„ New best: D2 T10â†’T12, OSD=10.90 (was inf)
       âœ… SWAP: T11 from D2 to D2, SSD=11.12â†’OSD=10.90
    ğŸ¯ T10: SSD=2.35 (route segment T5â†’T12)
    ğŸ¯ T12: SSD=17.39 (route segment T10â†’T11)
         ğŸ“ D1 segment A1â†’T17: OSD=11.55 < SSD=17.39
            ğŸ”„ New best: D1 A1â†’T17, OSD=11.55 (was inf)
         ğŸ“ D2 segment T11â†’T13: OSD=6.34 < SSD=17.39
            ğŸ”„ New best: D2 T11â†’T13, OSD=6.34 (was 11.55)
       âœ… SWAP: T12 from D2 to D2, SSD=17.39â†’OSD=6.34
    ğŸ¯ T13: SSD=8.00 (route segment T11â†’T12)
    ğŸ¯ T14: SSD=11.47 (route segment A3â†’A3)
    ğŸ¯ T2: SSD=10.58 (route segment A4â†’T6)
    ğŸ¯ T16: SSD=1.64 (route segment T6â†’T15)
    ğŸ¯ T15: SSD=1.86 (route segment T16â†’T4)
    ğŸ¯ T4: SSD=9.00 (route segment T15â†’T18)
    ğŸ¯ T18: SSD=11.02 (route segment T4â†’T19)
    ğŸ¯ T19: SSD=4.43 (route segment T18â†’A5)
    ğŸ¯ T7: SSD=11.61 (route segment A5â†’T1)
    ğŸ¯ T1: SSD=7.68 (route segment T7â†’T3)
    ğŸ¯ T3: SSD=3.79 (route segment T1â†’A1)

  ğŸ“ Pass 2/4
    ğŸ¯ T17: SSD=8.09 (route segment A1â†’T9)
    ğŸ¯ T9: SSD=16.03 (route segment T17â†’A1)
    ğŸ¯ T8: SSD=18.30 (route segment A2â†’T5)
    ğŸ¯ T5: SSD=14.66 (route segment T8â†’T10)
         ğŸ“ D2 segment A2â†’T8: OSD=8.80 < SSD=14.66
            ğŸ”„ New best: D2 A2â†’T8, OSD=8.80 (was inf)
         ğŸ“ D4 segment T16â†’T15: OSD=12.95 < SSD=14.66
            â›½ FUEL: D4 T16â†’T15 exceeds budget (145.9+11.8 > 150.0)
       âœ… SWAP: T5 from D2 to D2, SSD=14.66â†’OSD=8.80
    ğŸ¯ T10: SSD=11.12 (route segment T8â†’T11)
         ğŸ“ D2 segment T11â†’T13: OSD=11.09 < SSD=11.12
            ğŸ”„ New best: D2 T11â†’T13, OSD=11.09 (was inf)
       âœ… SWAP: T10 from D2 to D2, SSD=11.12â†’OSD=11.09
    ğŸ¯ T11: SSD=1.68 (route segment T8â†’T13)
    ğŸ¯ T13: SSD=22.72 (route segment T11â†’T10)
         ğŸ“ D1 segment A1â†’T17: OSD=9.24 < SSD=22.72
            ğŸ”„ New best: D1 A1â†’T17, OSD=9.24 (was inf)
         ğŸ“ D1 segment T17â†’T9: OSD=16.18 < SSD=22.72
         ğŸ“ D2 segment T10â†’T12: OSD=8.00 < SSD=22.72
            ğŸ”„ New best: D2 T10â†’T12, OSD=8.00 (was 9.24)
       âœ… SWAP: T13 from D2 to D2, SSD=22.72â†’OSD=8.00
    ğŸ¯ T12: SSD=3.45 (route segment T10â†’T13)
    ğŸ¯ T14: SSD=11.47 (route segment A3â†’A3)
    ğŸ¯ T2: SSD=10.58 (route segment A4â†’T6)
    ğŸ¯ T6: SSD=10.60 (route segment T2â†’T16)
    ğŸ¯ T16: SSD=1.64 (route segment T6â†’T15)
    ğŸ¯ T15: SSD=1.86 (route segment T16â†’T4)
    ğŸ¯ T4: SSD=9.00 (route segment T15â†’T18)
    ğŸ¯ T18: SSD=11.02 (route segment T4â†’T19)
    ğŸ¯ T19: SSD=4.43 (route segment T18â†’A5)
    ğŸ¯ T7: SSD=11.61 (route segment A5â†’T1)
    ğŸ¯ T1: SSD=7.68 (route segment T7â†’T3)
    ğŸ¯ T3: SSD=3.79 (route segment T1â†’A1)

  ğŸ“ Pass 3/4
    ğŸ¯ T17: SSD=8.09 (route segment A1â†’T9)
    ğŸ¯ T9: SSD=16.03 (route segment T17â†’A1)
    ğŸ¯ T5: SSD=8.80 (route segment A2â†’T8)
    ğŸ¯ T8: SSD=20.49 (route segment T5â†’T11)
         ğŸ“ D2 segment A2â†’T5: OSD=18.30 < SSD=20.49
            ğŸ”„ New best: D2 A2â†’T5, OSD=18.30 (was inf)
       âœ… SWAP: T8 from D2 to D2, SSD=20.49â†’OSD=18.30
    ğŸ¯ T11: SSD=11.12 (route segment T5â†’T10)
         ğŸ“ D2 segment T10â†’T12: OSD=10.90 < SSD=11.12
            ğŸ”„ New best: D2 T10â†’T12, OSD=10.90 (was inf)
       âœ… SWAP: T11 from D2 to D2, SSD=11.12â†’OSD=10.90
    ğŸ¯ T10: SSD=2.35 (route segment T5â†’T12)
    ğŸ¯ T12: SSD=17.39 (route segment T10â†’T11)
         ğŸ“ D1 segment A1â†’T17: OSD=11.55 < SSD=17.39
            ğŸ”„ New best: D1 A1â†’T17, OSD=11.55 (was inf)
         ğŸ“ D2 segment T11â†’T13: OSD=6.34 < SSD=17.39
            ğŸ”„ New best: D2 T11â†’T13, OSD=6.34 (was 11.55)
       âœ… SWAP: T12 from D2 to D2, SSD=17.39â†’OSD=6.34
    ğŸ¯ T13: SSD=8.00 (route segment T11â†’T12)
    ğŸ¯ T14: SSD=11.47 (route segment A3â†’A3)
    ğŸ¯ T2: SSD=10.58 (route segment A4â†’T6)
    ğŸ¯ T6: SSD=10.60 (route segment T2â†’T16)
    ğŸ¯ T16: SSD=1.64 (route segment T6â†’T15)
    ğŸ¯ T15: SSD=1.86 (route segment T16â†’T4)
    ğŸ¯ T4: SSD=9.00 (route segment T15â†’T18)
    ğŸ¯ T18: SSD=11.02 (route segment T4â†’T19)
    ğŸ¯ T19: SSD=4.43 (route segment T18â†’A5)
    ğŸ¯ T7: SSD=11.61 (route segment A5â†’T1)
    ğŸ¯ T1: SSD=7.68 (route segment T7â†’T3)
    ğŸ¯ T3: SSD=3.79 (route segment T1â†’A1)

  ğŸ“ Pass 4/4
    ğŸ¯ T17: SSD=8.09 (route segment A1â†’T9)
    ğŸ¯ T9: SSD=16.03 (route segment T17â†’A1)
    ğŸ¯ T8: SSD=18.30 (route segment A2â†’T5)
    ğŸ¯ T5: SSD=14.66 (route segment T8â†’T10)
         ğŸ“ D2 segment A2â†’T8: OSD=8.80 < SSD=14.66
            ğŸ”„ New best: D2 A2â†’T8, OSD=8.80 (was inf)
         ğŸ“ D4 segment T16â†’T15: OSD=12.95 < SSD=14.66
            â›½ FUEL: D4 T16â†’T15 exceeds budget (145.9+11.8 > 150.0)
       âœ… SWAP: T5 from D2 to D2, SSD=14.66â†’OSD=8.80
    ğŸ¯ T10: SSD=11.12 (route segment T8â†’T11)
         ğŸ“ D2 segment T11â†’T13: OSD=11.09 < SSD=11.12
            ğŸ”„ New best: D2 T11â†’T13, OSD=11.09 (was inf)
       âœ… SWAP: T10 from D2 to D2, SSD=11.12â†’OSD=11.09
    ğŸ¯ T11: SSD=1.68 (route segment T8â†’T13)
    ğŸ¯ T13: SSD=22.72 (route segment T11â†’T10)
         ğŸ“ D1 segment A1â†’T17: OSD=9.24 < SSD=22.72
            ğŸ”„ New best: D1 A1â†’T17, OSD=9.24 (was inf)
         ğŸ“ D1 segment T17â†’T9: OSD=16.18 < SSD=22.72
         ğŸ“ D2 segment T10â†’T12: OSD=8.00 < SSD=22.72
            ğŸ”„ New best: D2 T10â†’T12, OSD=8.00 (was 9.24)
       âœ… SWAP: T13 from D2 to D2, SSD=22.72â†’OSD=8.00
    ğŸ¯ T12: SSD=3.45 (route segment T10â†’T13)
    ğŸ¯ T14: SSD=11.47 (route segment A3â†’A3)
    ğŸ¯ T2: SSD=10.58 (route segment A4â†’T6)
    ğŸ¯ T6: SSD=10.60 (route segment T2â†’T16)
    ğŸ¯ T16: SSD=1.64 (route segment T6â†’T15)
    ğŸ¯ T15: SSD=1.86 (route segment T16â†’T4)
    ğŸ¯ T4: SSD=9.00 (route segment T15â†’T18)
    ğŸ¯ T18: SSD=11.02 (route segment T4â†’T19)
    ğŸ¯ T19: SSD=4.43 (route segment T18â†’A5)
    ğŸ¯ T7: SSD=11.61 (route segment A5â†’T1)
    ğŸ¯ T1: SSD=7.68 (route segment T7â†’T3)
    ğŸ¯ T3: SSD=3.79 (route segment T1â†’A1)

Optimized Solution:
  D1: A1 -> T17 -> T9 -> A1
    Distance: 48.9, Points: 15
  D2: A2 -> T5 -> T8 -> T11 -> T10 -> T12 -> T13 -> A1
    Distance: 102.4, Points: 30
    âš ï¸  CHANGED from: A2 -> T5 -> T6 -> T8 -> T11 -> T10 -> T12 -> T13 -> A1
  D3: A3 -> T14 -> A3
    Distance: 22.9, Points: 5
  D4: A4 -> T2 -> T6 -> T16 -> T15 -> T4 -> T18 -> T19 -> A5
    Distance: 145.9, Points: 49
    âš ï¸  CHANGED from: A4 -> T2 -> T16 -> T15 -> T4 -> T18 -> T19 -> A5
  D5: A5 -> T7 -> T1 -> T3 -> A1
    Distance: 70.8, Points: 13

============================================================
Validation: Checking for targets after end airports...
============================================================
  âœ… No bugs found! All targets are before end airports.

Test complete!
